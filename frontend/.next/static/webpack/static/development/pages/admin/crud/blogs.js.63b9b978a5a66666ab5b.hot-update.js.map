{"version":3,"file":"static/webpack/static/development/pages/admin/crud/blogs.js.63b9b978a5a66666ab5b.hot-update.js","sources":["webpack:///./components/crud/BlogRead.js"],"sourcesContent":["import Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport { getCookie, isAuth } from '../../actions/auth';\nimport { list, removeBlog } from '../../actions/blog';\nimport moment from 'moment';\n\nconst BlogRead = () => {\n    const [blogs, setBlogs] = useState([]);\n    const [message, setMessage] = useState('');\n    const token = getCookie('token');\n\n    useEffect(() => {\n        loadBlogs();\n    }, []);\n\n    const loadBlogs = () => {\n        list().then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setBlogs(data);\n            }\n        });\n    };\n\n    const deleteBlog = slug => {\n        removeBlog(slug, token).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setMessage(data.message);\n                loadBlogs();\n            }\n        });\n    };\n\n    const deleteConfirm = slug => {\n        let answer = window.confirm('Are you sure you want to delete your blog?');\n        if (answer) {\n            deleteBlog(slug);\n        }\n    };\n\n    const showUpdateButton = blog => {\n        // if(isAuth() &&  isAuth().role === 0) {\n        //     return(\n        //         <Link href = {`/user/crud/${blog.slug}`}>\n        //             <a className=\"btn btn-sm btn-warning\">Update</a>    \n        //         </Link>\n        //     );\n        // }\n         if(isAuth() && isAuth().role === 1) {\n            return(\n                <Link href = {`/admin/crud/${blog.slug}`}>\n                    <a className=\"ml-3 btn btn-sm btn-warning\" style={{fontFamily:\"arial\"}}>Update</a>\n                </Link>\n            );\n        }\n    }\n\n    const showAllBlogs = () => {\n        return blogs.map((blog, i) => {\n            return (\n                <div key={i} className=\"pb-5\">\n                    <h3>{blog.title}</h3>\n                    <p className=\"mark\">\n                        Written by {blog.postedBy.name} | Published on {moment(blog.updatedAt).fromNow()}\n                    </p>\n                    <button className=\"btn btn-sm btn-danger\" onClick={() => deleteConfirm(blog.slug)}>\n                        Delete\n                    </button>\n                    {showUpdateButton(blog)}\n                </div>\n            );\n        });\n    };\n\n    return (\n        <React.Fragment>\n            <div className=\"row\">\n                <div className=\"col-md-12\">\n                    {message && <div className=\"alert alert-warning\">{message}</div>}\n                    {showAllBlogs()}\n                </div>\n            </div>\n        </React.Fragment>\n    );\n};\n\nexport default BlogRead;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;A","sourceRoot":""}