{"version":3,"file":"static/webpack/static/development/pages/signin.js.4e5f65dfd30dfb2fc7bb.hot-update.js","sources":["webpack:///./components/auth/SigninComponent.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { signin, authenticate, isAuth } from '../../actions/auth';\nimport Router from 'next/router';\nimport Link from 'next/link';\n\n\nconst SigninComponent = () => {\n    const [values, setValues] = useState({\n        email: '',\n        password: '',\n        error: '',\n        loading: false,\n        message: '',\n        showForm: true\n    });\n\n    const { email, password, error, loading, message, showForm } = values;\n\n    useEffect(() => {\n        isAuth() && Router.push(`/`);\n    }, []);\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        // console.table({ name, email, password, error, loading, message, showForm });\n        setValues({ ...values, loading: true, error: false });\n        const user = { email, password };\n\n        signin(user).then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error, loading: false });\n            } else {\n                // save user token to cookie\n                // save user info to localstorage\n                // authenticate user\n                authenticate(data, () => {\n                    if (isAuth() && isAuth().role === 1) {\n                        Router.push(`/admin`);\n                    } else {\n                        Router.push(`/blogs`);\n                    }\n                });\n            }\n        });\n    };\n\n    const handleChange = name => e => {\n        setValues({ ...values, error: false, [name]: e.target.value });\n    };\n\n    const showLoading = () => (loading ? <div className=\"alert alert-info\">Loading...</div> : '');\n    const showError = () => (error ? <div className=\"alert alert-danger\">{error}</div> : '');\n    const showMessage = () => (message ? <div className=\"alert alert-info\">{message}</div> : '');\n\n    const signinForm = () => {\n        return (\n            <div className=\"wrapper\">\n            <div className=\"signup-component-js\">\n            <form onSubmit={handleSubmit}>\n                <div className=\"form-group\">\n                    <input\n                        value={email}\n                        onChange={handleChange('email')}\n                        type=\"email\"\n                        className=\"form-control\"\n                        placeholder=\"Type your email\"\n                    />\n                </div>\n\n                <div className=\"form-group\">\n                    <input\n                        value={password}\n                        onChange={handleChange('password')}\n                        type=\"password\"\n                        className=\"form-control\"\n                        placeholder=\"Type your password\"\n                    />\n                </div>\n\n                <div>\n                    <button className=\"btn btn-primary\">Log in</button>\n                </div>\n                <br/>\n                {/* <Link href=\"/auth/password/forgot\">\n                <a className=\"btn btn-outline-danger btn-sm\">Forgot password</a>\n                </Link> */}\n            </form>\n            </div>\n            </div>\n        );\n    };\n\n    return (\n        <React.Fragment>\n            {showError()}\n            {showLoading()}\n            {showMessage()}\n            {showForm && signinForm()}\n            {/* <Link href=\"/auth/password/forgot\">\n                <a className=\"btn btn-outline-danger btn-sm\">Forgot password</a>\n            </Link> */}\n        </React.Fragment>\n    );\n};\n\nexport default SigninComponent;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAFA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;;;;A","sourceRoot":""}